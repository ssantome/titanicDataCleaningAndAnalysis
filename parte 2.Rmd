---
title: "parte para incluir"
author: "Estudiosos"
date: "8/6/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Ahora vamos a discretizar la variable edad, que nos resultará útil a la hora de analizar.....

```{r echo=TRUE, message=FALSE, warning=FALSE}
# Añadimos la edad discretizada al dataset. Discretizamos con intervalos de igual amplitud

summary(titanicData[,"Age"])

titanicData$Age <- cut(titanicData$Age, breaks = c(0,10,20,30,40,50,60,70,81), labels = c("0-9", "10-19", "20-29", "30-39","40-49","50-59","60-69","70-80"))

head(titanicData)

plot(titanicData$Age)

```

Tambien se podría normalizar un dato, para "demostrar" que sabemos hacerlo jajaja. pero bueno, tampoco es muy necesario, aunque es muy sencillo, por ejemplo.

```{r echo=TRUE, message=FALSE, warning=FALSE}
#Normalizacion por la diferencia
minFare = min(titanicData$Fare)
maxFare = max(titanicData$Fare)
diffMinMaxFare = maxFare - minFare

titanicData["Fare_norm"] <- ((titanicData$Fare - minFare) / diffMinMaxFare)
head(titanicData)

```




Simplificacion de datos:  Ahora vamos a analizar los valores redundantes, o que simplemente no tengan una funcion especial en el dataset, como por ejemplo, el nombre de los pasajeros no es nada util teniendo un id de pasajero, asi que podriamos simplemente eliminar esa columna.

se puede tambien hacer alguna comparacion entre si 2 campos coinciden mucho, pero ya se ve a suimple vista que no, asi que no seria muy necesario




Ahora se podrian ver valores extremos. por ejemplo el precio, que hay un billete que valio mas de 500 € como vimos en el summary

aqui podemos aprovechar nuestra variable normalizada o no, tanto da


```{r echo=TRUE, message=FALSE, warning=FALSE}
#representación de la distribución de los precios de los billetes
ggplot(data=titanicData, aes(x=Fare)) + geom_boxplot()
ggplot(data=titanicData, aes(x=Fare_norm)) + geom_boxplot()


```

Vemos como el valor de 500 es altamente extraño, podriamos buscarle solucion, o eliminarlo, tambien hay valores por encima de 200 que chirrian un poco, pero aqui ya se podria ver si coinciden con camarotes de lujo etc. 


Creo que no hay mas variables donde ver valores extremos.


## Analisis 



Como la varaible survived es una clase vamos a discretizar la varaible tranformandola a string
```{r echo=TRUE, message=FALSE, warning=FALSE}

titanicData["Survived_discreta"] <- cut(titanicData$Survived, breaks = c(-1,0.5,1), labels = c("No", "Si"))

head(titanicData)

plot(titanicData$Survived_discreta)

```

Esto se puede usar como introducción y para tener una idea visual de como afectan las diferentes variables en la supervivencia y asi elegir que datos analizar. Antes de hacerlo de la homogeniedad y normalidad, y aplicar las correlaciones, regrasiones, etc.

A partir de aqui ya comenzariamos con el analisis de los datos, asi que hay que empezar a comparar los diferentes atributos con la varaible survived

Empezamos por la edad

```{r echo=TRUE, message=FALSE, warning=FALSE}
ggplot(data=titanicData, aes(x=Age, y=Survived_discreta)) + geom_boxplot()

```

Sex

No se por que coño sale NA aqui, hay que arreglarlo, pero no encuentro el por que

```{r echo=TRUE, message=FALSE, warning=FALSE}
ggplot(data=titanicData[1:filas,],aes(x=Sex,fill=Survived_discreta))+geom_bar()

```

Relacion entre age y sex para ampliar explicacion sobre los datos de antes
```{r echo=TRUE, message=FALSE, warning=FALSE}
ggplot(data=titanicData[1:filas,],aes(x=Age,fill=Sex))+geom_bar(position="fill")+ylab("Frecuencia")

```

Ahora hay que seguir buscando relaciones interesantes para completar el analisis



```{r echo=TRUE, message=FALSE, warning=FALSE}

ggplot(data=titanicData[1:filas,],aes(y=Embarked,fill=Survived_discreta))+geom_bar(position="fill")

```

```{r echo=TRUE, message=FALSE, warning=FALSE}

ggplot(data=titanicData[1:filas,],aes(y=Pclass,fill=Survived_discreta))+geom_bar(position="fill")+facet_wrap(~Embarked)+theme(axis.text.y = element_text(size = rel(0.7)))

```
Y a partir de aqui todas las combinaciones de columnas y graficas de las que podamos sacar algo de partido para explicar bien el analisis

```{r echo=TRUE, message=FALSE, warning=FALSE}

```

```{r echo=TRUE, message=FALSE, warning=FALSE}

```

```{r echo=TRUE, message=FALSE, warning=FALSE}

```

```{r echo=TRUE, message=FALSE, warning=FALSE}

```

```{r echo=TRUE, message=FALSE, warning=FALSE}

```

```{r echo=TRUE, message=FALSE, warning=FALSE}

```

```{r echo=TRUE, message=FALSE, warning=FALSE}

```

```{r echo=TRUE, message=FALSE, warning=FALSE}

```

```{r echo=TRUE, message=FALSE, warning=FALSE}

```
